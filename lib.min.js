!function(a){if("object"==typeof module&&"object"==typeof exports)module.exports=a();else{if("function"==typeof define&&define.amd)return define([],a);window.ajaxify=a()}}(function(){"use strict";function c(a){return"function"==typeof a}function d(a){return function(b){b.request=new XMLHttpRequest,e(b.request,b.success,b.failure);var c=f(a,b);return b.doSend?j(c):b.send=function(){j(c)},b}}function e(a,b,c){a.onreadystatechange=function(){g(a)?h(a,b):i(a,c)}}function f(a,b){return{request:b.request,headers:b.headers,method:a,data:b.data,url:b.url}}function g(a){return a.readyState===XMLHttpRequest.DONE&&200===a.status||201===a.status}function h(a,b){c(b)&&b(a.responseText)}function i(a,b){if(c(b))b(a.responseText,a.status);else{var d="AJAX error: unhandled error with status ";d+=a.status,d+=" and body: "+a.responseText,console.error(d)}}function j(a){a.request.open(a.method,a.url),k(a.request,a.headers),a.data?(a.request.setRequestHeader(b[0],b[1]),a.request.send(m(a.data))):a.request.send()}function k(a,b){if(b)for(var c in b)a.setRequestHeader(c,b[c])}function m(a){if("string"==typeof a)return a;var b=Object.keys(a);return b.map(function(b){return encodeURIComponent(b)+"="+encodeURIComponent(a[b])}).join("&")}var a=["GET","POST","PUT","DELETE"],b=["Content-Type","application/x-www-form-urlencoded"],n={};return a.forEach(function(a){n[a.toLowerCase()]=d(a)}),n});